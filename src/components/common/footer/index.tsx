import React from "react";
import Bounded from "../containers/bounded";
import { createClient } from "@/prismicio";
import { PrismicNextImage, PrismicNextLink } from "@prismicio/next";
import LogoBrand from "../logos";
import Heading from "../typography/heading";
import Paragraph from "../typography/paragraph";
import Link from "next/link";
import { Locales } from "../locates/locate";
import { shortLocaleToLong } from "@/i18n/routing";
import { PrismicRichText } from "@prismicio/react";
import { isFilled } from "@prismicio/client";

type SiteFooterProps = {
  locale: string;
};

const SiteFooter = async ({ locale }: SiteFooterProps) => {
  const client = createClient();
  const page = await client.getSingle("settings", {
    lang: shortLocaleToLong(locale),
  });

  const footers = await Promise.all(
    page.data.footer_links.map((item) => {
      if (
        isFilled.contentRelationship(item.footer_links) &&
        item.footer_links.uid
      ) {
        return client.getByUID("footers", item.footer_links.uid);
      }
    })
  );

  const footerItems = await Promise.all(
    footers.map(async (nav, index) => {
      if (!nav) return null;
      if (nav.data.footer_items.length > 1)
        return (
          <div
            key={index}
            className="flex flex-col justify-between text-white md:text-xl gap-4"
          >
            <Heading className="text-white text-[17px] md:text-base font-semibold md:font-normal">
              {nav?.data.name}
            </Heading>
            <div className="flex flex-col gap-4">
              {nav?.data.footer_items.map((link, index) => (
                <PrismicNextLink
                  key={index}
                  field={link.link}
                  className="text-base text-[#B1B1B1] font-normal"
                >
                  {link.name}
                </PrismicNextLink>
              ))}
            </div>
          </div>
        );
    })
  );

  return (
    <div className="flex items-center justify-center pt-16 pb-8 px-0 md:px-12 bg-[#00122F] md:h-[456px] relative overflow-hidden">
      <FooterVector />
      <Bounded as="footer" className="flex flex-col w-full gap-12">
        <PrismicNextImage field={page.data.light_logo} />
        <div className="flex flex-col md:flex-row items-start gap-12">
          <div className="flex flex-col gap-3 max-w-[561px]">
            <PrismicRichText
              field={page.data.title}
              components={{
                heading5: ({ children }) => (
                  <Heading className="text-white text-[17px] font-semibold md:text-2xl">
                    {children}
                  </Heading>
                ),
              }}
            />
            <PrismicRichText
              field={page.data.description}
              components={{
                paragraph: ({ children }) => (
                  <Paragraph className="text-[#B1B1B1] text-sm md:text-base">
                    {children}
                  </Paragraph>
                ),
              }}
            />
          </div>
          <div className="grid grid-cols-1 md:grid-cols-4 gap-9 md:gap-0 w-full">
            {footerItems}
          </div>
        </div>
        <div className="flex flex-col gap-8">
          <div className="h-[1px] bg-white/[24%] w-full" />
          <div className="flex flex-col md:flex-row items-center justify-between">
            <PrismicRichText
              field={page.data.copyright_text}
              components={{
                paragraph: ({ children }) => (
                  <Paragraph className="text-[#6D6D6D] text-sm md:text-base">
                    {children}
                  </Paragraph>
                ),
              }}
            />
            <Locales document={page} />
          </div>
        </div>
      </Bounded>
    </div>
  );
};

export default SiteFooter;

const FooterVector = () => {
  return (
    <svg
      width="435"
      height="390"
      viewBox="0 0 435 390"
      className="absolute -right-20 top-1/2 -translate-y-1/2 md:-bottom-5 md:right-10 w-[316.8297424316406px] h-[371.00018310546875px] md:w-[435px] md:h-[390px]"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g opacity="0.16">
        <path
          d="M74.1059 69.6689C73.8946 69.6689 73.7044 69.6266 73.5353 69.5209C73.2606 69.373 73.0705 69.1194 73.0071 68.8236L71.9294 64.7454C71.7604 64.1326 72.1407 63.4986 72.7535 63.3296L271.89 10.5237C271.89 10.5237 272.08 10.4814 272.186 10.4814C272.693 10.4814 273.158 10.8195 273.306 11.3267L274.384 15.4049C274.468 15.7008 274.426 16.0177 274.257 16.2713C274.109 16.546 273.855 16.7362 273.56 16.7996L74.4228 69.6055C74.4228 69.6055 74.2327 69.6477 74.127 69.6477L74.1059 69.6689Z"
          fill="#838383"
        />
        <path
          d="M425.215 163.722C424.92 163.722 424.624 163.616 424.391 163.383L280.659 18.4049C280.216 17.9612 280.216 17.2216 280.659 16.7779L283.639 13.8195C283.85 13.6082 284.146 13.4814 284.442 13.4814C284.738 13.4814 285.034 13.6082 285.245 13.8195L428.977 158.798C429.188 159.009 429.315 159.305 429.315 159.622C429.315 159.939 429.188 160.214 428.977 160.446L425.976 163.405C425.744 163.637 425.448 163.743 425.173 163.743L425.215 163.722Z"
          fill="#838383"
        />
        <path
          d="M430.773 169.934C430.773 169.934 430.561 169.934 430.477 169.891L76.5992 74.1687C76.3034 74.0842 76.0498 73.894 75.9019 73.6193C75.754 73.3446 75.7117 73.0276 75.7963 72.7529L76.895 68.6958C77.043 68.1887 77.5078 67.8506 78.015 67.8506C78.1206 67.8506 78.2263 67.8506 78.3108 67.8928L432.189 163.615C432.801 163.784 433.16 164.418 432.991 165.031L431.893 169.088C431.808 169.384 431.618 169.638 431.364 169.786C431.195 169.891 430.984 169.934 430.794 169.934H430.773Z"
          fill="#838383"
        />
        <path
          d="M254.288 120.002C254.288 120.002 254.098 120.002 253.992 119.96L249.914 118.903C249.301 118.756 248.921 118.122 249.09 117.509L274.806 17.8136C274.933 17.2854 275.419 16.9473 275.926 16.9473C276.011 16.9473 276.116 16.9473 276.222 16.9895L280.3 18.0461C280.596 18.1306 280.85 18.3208 280.998 18.5743C281.146 18.8279 281.209 19.1449 281.124 19.4407L255.429 119.136C255.345 119.432 255.155 119.685 254.901 119.833C254.732 119.939 254.521 119.981 254.309 119.981L254.288 120.002Z"
          fill="#838383"
        />
        <path
          d="M114.93 247.527C114.719 247.527 114.529 247.485 114.36 247.379C114.085 247.231 113.895 246.978 113.832 246.682L67.0691 71.8879C66.9 71.2751 67.2804 70.6412 67.8932 70.4721L71.9714 69.3733C71.9714 69.3733 72.1616 69.3311 72.2672 69.3311C72.4785 69.3311 72.6687 69.3733 72.8378 69.479C73.1125 69.6269 73.3026 69.8805 73.366 70.1763L120.128 244.97C120.298 245.583 119.917 246.217 119.304 246.386L115.247 247.485C115.247 247.485 115.057 247.527 114.951 247.527H114.93Z"
          fill="#838383"
        />
        <path
          d="M15.6367 277.046C15.6367 277.046 15.4254 277.046 15.3409 277.004L11.2838 275.884C10.9879 275.8 10.7344 275.609 10.5865 275.335C10.4386 275.06 10.3963 274.743 10.4808 274.468L67.0691 68.5064C67.217 67.9992 67.6819 67.6611 68.1891 67.6611C68.2947 67.6611 68.4004 67.6611 68.4849 67.7034L72.542 68.8233C72.8378 68.9078 73.0914 69.098 73.2393 69.3727C73.3872 69.6474 73.4295 69.9644 73.345 70.2391L16.7567 276.201C16.6088 276.708 16.1439 277.046 15.6367 277.046Z"
          fill="#838383"
        />
        <path
          d="M166.004 435.717C165.708 435.717 165.412 435.612 165.18 435.379L14.7494 285.055C14.5381 284.843 14.4114 284.547 14.4114 284.23C14.4114 283.914 14.5381 283.639 14.7494 283.406L17.7289 280.427C17.9613 280.195 18.2572 280.089 18.553 280.089C18.8488 280.089 19.1447 280.195 19.3771 280.427L169.807 430.752C170.019 430.963 170.145 431.259 170.145 431.576C170.145 431.893 170.019 432.167 169.807 432.4L166.828 435.379C166.595 435.612 166.3 435.717 166.004 435.717Z"
          fill="#838383"
        />
        <path
          d="M168.983 435.717C168.687 435.717 168.391 435.611 168.18 435.379L165.201 432.42C164.989 432.209 164.863 431.913 164.863 431.596C164.863 431.301 164.989 431.005 165.201 430.772L426.082 167.989C426.293 167.778 426.589 167.651 426.906 167.651C427.202 167.651 427.497 167.778 427.709 167.989L430.688 170.948C431.132 171.392 431.132 172.131 430.688 172.575L169.807 435.337C169.575 435.569 169.279 435.675 168.983 435.675V435.717Z"
          fill="#838383"
        />
        <path
          d="M17.5598 280.089C17.0315 280.089 16.5667 279.73 16.4399 279.202L15.4467 275.123C15.3833 274.828 15.4256 274.511 15.5735 274.257C15.7215 274.004 15.9962 273.813 16.292 273.729L121.312 247.991C121.312 247.991 121.502 247.949 121.587 247.949C122.115 247.949 122.58 248.308 122.707 248.837L123.7 252.915C123.763 253.211 123.721 253.528 123.573 253.781C123.425 254.035 123.15 254.225 122.855 254.31L17.8345 280.047C17.8345 280.047 17.6443 280.089 17.5598 280.089Z"
          fill="#838383"
        />
        <path
          d="M126.531 249.091C126.235 249.091 125.94 248.964 125.728 248.753L122.728 245.795C122.284 245.351 122.263 244.611 122.728 244.168L248.266 116.601C248.498 116.368 248.794 116.263 249.09 116.263C249.386 116.263 249.682 116.368 249.893 116.601L252.894 119.559C253.105 119.77 253.232 120.066 253.232 120.362C253.232 120.679 253.105 120.954 252.894 121.186L127.355 248.753C127.144 248.964 126.848 249.091 126.552 249.091H126.531Z"
          fill="#838383"
        />
        <path
          d="M295.916 295.874C295.726 295.874 295.514 295.831 295.345 295.726C295.071 295.578 294.88 295.324 294.796 295.028L247.4 124.735C247.315 124.439 247.357 124.122 247.505 123.869C247.653 123.615 247.907 123.404 248.203 123.319L252.26 122.199C252.26 122.199 252.471 122.157 252.577 122.157C253.084 122.157 253.549 122.495 253.697 123.002L301.093 293.296C301.262 293.908 300.903 294.542 300.29 294.711L296.233 295.831C296.233 295.831 296.022 295.874 295.916 295.874Z"
          fill="#838383"
        />
        <path
          d="M372.092 375.896C371.797 375.896 371.501 375.769 371.29 375.579L298.071 304.03C297.86 303.819 297.733 303.523 297.733 303.227C297.733 302.91 297.839 302.636 298.071 302.403L301.008 299.403C301.241 299.17 301.537 299.064 301.833 299.064C302.128 299.064 302.424 299.17 302.636 299.381L375.854 370.93C376.319 371.374 376.319 372.114 375.854 372.557L372.917 375.579C372.705 375.79 372.409 375.917 372.114 375.917L372.092 375.896Z"
          fill="#838383"
        />
        <path
          d="M381.052 373.254C381.052 373.254 380.862 373.254 380.756 373.212L376.678 372.134C376.065 371.965 375.685 371.352 375.854 370.719L428.153 171.497C428.28 170.969 428.766 170.631 429.273 170.631C429.378 170.631 429.463 170.631 429.568 170.673L433.647 171.73C433.943 171.814 434.196 172.004 434.344 172.258C434.492 172.511 434.534 172.828 434.471 173.124L382.172 372.346C382.088 372.641 381.897 372.895 381.644 373.043C381.475 373.149 381.263 373.191 381.052 373.191V373.254Z"
          fill="#838383"
        />
        <path
          d="M292.387 299.55C292.387 299.55 292.197 299.55 292.091 299.508L125.454 256.296C124.841 256.148 124.461 255.514 124.63 254.901L125.686 250.823C125.771 250.527 125.961 250.273 126.214 250.125C126.405 250.02 126.595 249.978 126.806 249.978C126.912 249.978 126.996 249.978 127.102 250.02L293.74 293.232C294.352 293.38 294.733 294.014 294.564 294.627L293.507 298.705C293.423 299.001 293.232 299.255 292.979 299.403C292.789 299.508 292.598 299.55 292.387 299.55Z"
          fill="#838383"
        />
        <path
          d="M164.102 428.512C163.595 428.512 163.13 428.174 162.982 427.667L118.1 264.178C117.931 263.565 118.29 262.931 118.903 262.762L122.96 261.642C122.96 261.642 123.172 261.6 123.256 261.6C123.446 261.6 123.658 261.642 123.827 261.748C124.101 261.895 124.291 262.149 124.376 262.445L169.258 425.955C169.342 426.251 169.3 426.568 169.152 426.821C169.004 427.075 168.751 427.286 168.455 427.371L164.398 428.491C164.398 428.491 164.186 428.533 164.102 428.533V428.512Z"
          fill="#838383"
        />
        <path
          d="M149.627 508.767C148.402 508.767 147.197 508.344 146.225 507.604C144.429 506.21 143.668 503.907 144.239 501.73L162.454 434.323C162.538 434.027 162.728 433.773 162.982 433.626C163.151 433.52 163.362 433.478 163.552 433.478C163.658 433.478 163.764 433.478 163.848 433.52L167.905 434.619C168.518 434.788 168.877 435.422 168.708 436.034L151.085 501.265L374.1 373.572C374.269 373.466 374.48 373.424 374.67 373.424C374.776 373.424 374.882 373.424 374.966 373.466C375.262 373.551 375.516 373.741 375.664 373.994L377.756 377.65C378.072 378.199 377.882 378.918 377.333 379.235L152.353 508.048C151.508 508.534 150.557 508.788 149.585 508.788L149.627 508.767Z"
          fill="#838383"
        />
        <path
          d="M13.6082 290.507C21.1239 290.507 27.2165 284.414 27.2165 276.898C27.2165 269.383 21.1239 263.29 13.6082 263.29C6.09262 263.29 0 269.383 0 276.898C0 284.414 6.09262 290.507 13.6082 290.507Z"
          fill="#838383"
        />
        <path
          d="M118.438 264.769C125.954 264.769 132.046 258.677 132.046 251.161C132.046 243.645 125.954 237.553 118.438 237.553C110.922 237.553 104.83 243.645 104.83 251.161C104.83 258.677 110.922 264.769 118.438 264.769Z"
          fill="#838383"
        />
        <path
          d="M279.307 27.2165C286.823 27.2165 292.915 21.1239 292.915 13.6082C292.915 6.09262 286.823 0 279.307 0C271.791 0 265.699 6.09262 265.699 13.6082C265.699 21.1239 271.791 27.2165 279.307 27.2165Z"
          fill="#838383"
        />
        <path
          d="M70.2178 82.9587C77.7335 82.9587 83.8261 76.8661 83.8261 69.3504C83.8261 61.8348 77.7335 55.7422 70.2178 55.7422C62.7022 55.7422 56.6096 61.8348 56.6096 69.3504C56.6096 76.8661 62.7022 82.9587 70.2178 82.9587Z"
          fill="#838383"
        />
        <path
          d="M297.944 309.968C305.46 309.968 311.553 303.876 311.553 296.36C311.553 288.845 305.46 282.752 297.944 282.752C290.429 282.752 284.336 288.845 284.336 296.36C284.336 303.876 290.429 309.968 297.944 309.968Z"
          fill="#838383"
        />
        <path
          d="M375.769 389.991C383.285 389.991 389.378 383.898 389.378 376.383C389.378 368.867 383.285 362.774 375.769 362.774C368.254 362.774 362.161 368.867 362.161 376.383C362.161 383.898 368.254 389.991 375.769 389.991Z"
          fill="#838383"
        />
        <path
          d="M250.548 132.342C258.064 132.342 264.156 126.25 264.156 118.734C264.156 111.219 258.064 105.126 250.548 105.126C243.033 105.126 236.94 111.219 236.94 118.734C236.94 126.25 243.033 132.342 250.548 132.342Z"
          fill="#838383"
        />
      </g>
    </svg>
  );
};
